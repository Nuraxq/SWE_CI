#Name der Pipeline
name: Java CI

#Egal auf welchem Branch immer beim Push wird es ausgeführt
on:
  push:

# Die Tasks die durchgeführt werden, wir haben nur einen Job der alles macht
jobs:
  compile_and_test:

  #Festlegen welche VM Verwendet werden soll
    runs-on: ubuntu-latest
    steps:
      #Code des Repos wird heruntergeladen in die VM
      - uses: actions/checkout@v3
      
      #Installiert Java in der VM, mit der Java 21 Temurin distro
      - uses: actions/setup-java@v3
        with:
          distribution: 'temurin'
          java-version: 21

      #Es wird ein bin verzeichnis angelegt
      - run: mkdir -p Java_CI/bin

      #Die Dateien werden kompiliert
      - run: |
          echo "Kompiliere Java Dateien:"
          javac -d Java_CI/bin Java_CI/src/*.java
          echo "Ende Kompilierung"

      #Die Kompilierten Dateien werden ausgeführt
      - run: |
          echo "Starte Testlauf:"
          java -cp Java_CI/bin Mult
          echo "Ende Testlauf."
